var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.useLoginViewModel=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=require("react");var _reactNative=require("react-native");var _reactNativeToastMessage=_interopRequireDefault(require("react-native-toast-message"));var _userAuthUsecases=require("../../domain/use-cases/user-auth/user-auth-usecases");var _native=require("@react-navigation/native");var useLoginViewModel=function useLoginViewModel(){var _useNavigation=(0,_native.useNavigation)(),navigate=_useNavigation.navigate;var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2.default)(_useState,2),onFocusedCpf=_useState2[0],setOnFocusedCpf=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2.default)(_useState3,2),onFocusedPlate=_useState4[0],setOnFocusedPlate=_useState4[1];var _useState5=(0,_react.useState)(false),_useState6=(0,_slicedToArray2.default)(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var onSubmit=function(){var _ref2=(0,_asyncToGenerator2.default)(function*(_ref){var email=_ref.email,password=_ref.password;try{setIsLoading(true);var _yield$handleSigninWh=yield(0,_userAuthUsecases.handleSigninWhithEmailAndPassword)({email:email,password:password}),data=_yield$handleSigninWh.data;if(data.code===200){_reactNativeToastMessage.default.show({type:'success',text1:'Login',text2:'✅ Usuário logado com sucesso!',props:{uuid:'bba1a7d0-6ab2-4a0a-a76e-ebbe05ae6d70'}});return navigate('HomeView');}if((data==null?void 0:data.code)===401){_reactNativeToastMessage.default.show({type:'error',text1:'Login',text2:'❌ Error, usuário ou senha inválidos!',props:{uuid:'bba1a7d0-6ab2-4a0a-a76e-ebbe05ae6d70'}});}}catch(error){_reactNativeToastMessage.default.show({type:'error',text1:'Error',text2:'❌ Ocorreu um erro na tentativa de se conectar com o servidor!',props:{uuid:'bba1a7d0-6ab2-4a0a-a76e-ebbe05ae6d70'}});}finally{setIsLoading(false);}});return function onSubmit(_x){return _ref2.apply(this,arguments);};}();var handleCloseApplication=function handleCloseApplication(){_reactNative.BackHandler.exitApp();};return{isLoading:isLoading,setOnFocusedPlate:setOnFocusedPlate,onFocusedPlate:onFocusedPlate,setOnFocusedCpf:setOnFocusedCpf,onFocusedCpf:onFocusedCpf,onSubmit:onSubmit,handleCloseApplication:handleCloseApplication};};exports.useLoginViewModel=useLoginViewModel;