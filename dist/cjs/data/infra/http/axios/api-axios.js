var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _axios=_interopRequireDefault(require("axios"));var _axiosConfig=require("../../../config/axios-config");var createAxiosInstance=function(){var _ref=(0,_asyncToGenerator2.default)(function*(accessToken){var instance=_axios.default.create(_axiosConfig.configAxios);instance.interceptors.request.use(function(value){if(accessToken){value.headers={Authorization:`Bearer ${accessToken}`};}return value;});instance.interceptors.response.use(function(value){var _value$data,_value$data$errors;if((_value$data=value.data)!=null&&(_value$data$errors=_value$data.errors)!=null&&_value$data$errors.length){var _value$data2;throw new Error((_value$data2=value.data)==null?void 0:_value$data2.errors);}else{return value;}},function(){var _ref2=(0,_asyncToGenerator2.default)(function*(error){var _error$response,_error$response2,_error$response4,_error$response6,_error$response8,_error$response8$data,_error$response8$data2;if((error==null?void 0:error.message)==='Network Error'){throw new Error('Sem conexão com a internet, tente novamente mais tarde!');}if(error.code==='ECONNABORTED'){throw new Error('Nosso servidor demorou muito tempo para responder, tente novamente mais tarde!');}if((error==null?void 0:(_error$response=error.response)==null?void 0:_error$response.status)===401){throw new Error('Usuário não possui autorização, tente novamente mais tarde!');}if((error==null?void 0:(_error$response2=error.response)==null?void 0:_error$response2.status)===403){var _error$response3,_error$response3$data;throw new Error(error==null?void 0:(_error$response3=error.response)==null?void 0:(_error$response3$data=_error$response3.data)==null?void 0:_error$response3$data.message);}if((error==null?void 0:(_error$response4=error.response)==null?void 0:_error$response4.status)===400){var _error$response5,_error$response5$data;throw new Error(error==null?void 0:(_error$response5=error.response)==null?void 0:(_error$response5$data=_error$response5.data)==null?void 0:_error$response5$data.message);}if((error==null?void 0:(_error$response6=error.response)==null?void 0:_error$response6.status)===422){var _error$response7,_error$response7$data;throw new Error(error==null?void 0:(_error$response7=error.response)==null?void 0:(_error$response7$data=_error$response7.data)==null?void 0:_error$response7$data.message);}if(error!=null&&(_error$response8=error.response)!=null&&(_error$response8$data=_error$response8.data)!=null&&(_error$response8$data2=_error$response8$data.errors)!=null&&_error$response8$data2.length){throw new Error(error.response.data.errors[0]);}return error;});return function(_x2){return _ref2.apply(this,arguments);};}());return instance;});return function createAxiosInstance(_x){return _ref.apply(this,arguments);};}();var _default={createAxiosInstance:createAxiosInstance};exports.default=_default;